{"_id":"RMHbRpehTmqczZA5","name":"Twilight Sanctuary","type":"script","author":"h3vjdsNcTNpDAKxr","img":"icons/svg/dice-target.svg","scope":"global","command":"async function tempHP({\n  actor\n}) {\n  let target = actor.name;\n  let currentTHP = actor.data.data.attributes.hp.temp;\n  let newTHP = new Roll(\"1d6 + @level\", {\n    level: 2\n  });\n  let output;\n  await newTHP.roll();\n  game.dice3d.showForRoll(newTHP);\n  if (newTHP.total > currentTHP) {\n    output = \"<b>\" + target + \"</b> is raised to \" + newTHP.total +\n      \" temp HP.\";\n    actor.data.data.attributes.hp.temp = newTHP.total;\n  } else {\n    output = \"<b>\" + target + \"</b> already has more than \" + newTHP.total +\n      \" temp HP.\";\n  }\n  return output;\n}\n\nif (token) {\n  output = await tempHP({\n    actor: token.actor\n  });\n  msg =\n    \"<h2>Sanctuary of the Glade</h2> Memories of twilight in the Glade imbue the party with resolve...<br><br>\" +\n    output;\n  ChatMessage.create({\n    content: msg,\n  });\n}","folder":null,"sort":0,"permission":{"default":0,"h3vjdsNcTNpDAKxr":3},"flags":{}}
